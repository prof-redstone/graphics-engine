
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <vector>

#include "render.hpp"



int main(){
    std::cout << "Graphics Engine\n";

    SetupRender();

    std::vector<float> vertices = {
        -1.0f,-1.0f,-1.0f, 
        -1.0f,-1.0f, 1.0f,
        -1.0f, 1.0f, 1.0f, 

        1.0f, 1.0f,-1.0f,
        -1.0f,-1.0f,-1.0f,
        -1.0f, 1.0f,-1.0f, 

        1.0f,-1.0f, 1.0f,
        -1.0f,-1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,

        1.0f, 1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,
        -1.0f,-1.0f,-1.0f,

        -1.0f,-1.0f,-1.0f,
        -1.0f, 1.0f, 1.0f,
        -1.0f, 1.0f,-1.0f,

        1.0f,-1.0f, 1.0f,
        -1.0f,-1.0f, 1.0f,
        -1.0f,-1.0f,-1.0f,

        -1.0f, 1.0f, 1.0f,
        -1.0f,-1.0f, 1.0f,
        1.0f,-1.0f, 1.0f,

        1.0f, 1.0f, 1.0f,
        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f,-1.0f,

        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f, 1.0f,
        1.0f,-1.0f, 1.0f,

        1.0f, 1.0f, 1.0f,
        1.0f, 1.0f,-1.0f,
        -1.0f, 1.0f,-1.0f,

        1.0f, 1.0f, 1.0f,
        -1.0f, 1.0f,-1.0f,
        -1.0f, 1.0f, 1.0f,

        1.0f, 1.0f, 1.0f,
        -1.0f, 1.0f, 1.0f,
        1.0f,-1.0f, 1.0f,

        -0.5f, 1.5f, -0.5f, 
        -0.5f, 1.5f, 0.5f,
        -0.5f, 2.5f, 0.5f, 

        0.5f, 2.5f, -0.5f,
        -0.5f, 1.5f, -0.5f,
        -0.5f, 2.5f, -0.5f, 

        0.5f, 1.5f, 0.5f,
        -0.5f, 1.5f, -0.5f,
        0.5f, 1.5f, -0.5f,

        0.5f, 2.5f, -0.5f,
        0.5f, 1.5f, -0.5f,
        -0.5f, 1.5f, -0.5f,

        -0.5f, 1.5f, -0.5f,
        -0.5f, 2.5f, 0.5f,
        -0.5f, 2.5f, -0.5f,

        0.5f, 1.5f, 0.5f,
        -0.5f, 1.5f, 0.5f,
        -0.5f, 1.5f, -0.5f,

        -0.5f, 2.5f, 0.5f,
        -0.5f, 1.5f, 0.5f,
        0.5f, 1.5f, 0.5f,

        0.5f, 2.5f, 0.5f,
        0.5f, 1.5f, -0.5f,
        0.5f, 2.5f, -0.5f,

        0.5f, 1.5f, -0.5f,
        0.5f, 2.5f, 0.5f,
        0.5f, 1.5f, 0.5f,

        0.5f, 2.5f, 0.5f,
        0.5f, 2.5f, -0.5f,
        -0.5f, 2.5f, -0.5f,

        0.5f, 2.5f, 0.5f,
        -0.5f, 2.5f, -0.5f,
        -0.5f, 2.5f, 0.5f,

        0.5f, 2.5f, 0.5f,
        -0.5f, 2.5f, 0.5f,
        0.5f, 1.5f, 0.5f,

         20.0f, -0.0f, -20.0f,
        - 20.0f, -0.0f, -20.0f,  
         20.0f, -0.0f,  20.0f,

         20.0f, -0.0f,  20.0f,
        -20.0f, -0.0f, -20.0f, 
        -20.0f, -0.0f,  20.0f
    };
    Mesh* truc = setupMesh(vertices);

    std::vector<float> cube = {
        // positions (translated by +2 on x, y, z)
        1.0f, 1.0f, 1.0f,    // (-1+2, -1+2, -1+2)
        1.0f, 1.0f, 3.0f,    // (-1+2, -1+2, 1+2)
        1.0f, 3.0f, 3.0f,    // (-1+2, 1+2, 1+2)
        3.0f, 3.0f, 1.0f,    // (1+2, 1+2, -1+2)
        1.0f, 1.0f, 1.0f,    // (-1+2, -1+2, -1+2)
        1.0f, 3.0f, 1.0f,    // (-1+2, 1+2, -1+2)
        3.0f, 1.0f, 3.0f,    // (1+2, -1+2, 1+2)
        1.0f, 1.0f, 1.0f,    // (-1+2, -1+2, -1+2)
        3.0f, 1.0f, 1.0f,    // (1+2, -1+2, -1+2)
        3.0f, 3.0f, 1.0f,    // (1+2, 1+2, -1+2)
        3.0f, 1.0f, 1.0f,    // (1+2, -1+2, -1+2)
        1.0f, 1.0f, 1.0f,    // (-1+2, -1+2, -1+2)
        1.0f, 1.0f, 1.0f,    // (-1+2, -1+2, -1+2)
        1.0f, 3.0f, 3.0f,    // (-1+2, 1+2, 1+2)
        1.0f, 3.0f, 1.0f,    // (-1+2, 1+2, -1+2)
        3.0f, 1.0f, 3.0f,    // (1+2, -1+2, 1+2)
        1.0f, 1.0f, 3.0f,    // (-1+2, -1+2, 1+2)
        1.0f, 1.0f, 1.0f,    // (-1+2, -1+2, -1+2)
        1.0f, 3.0f, 3.0f,    // (-1+2, 1+2, 1+2)
        1.0f, 1.0f, 3.0f,    // (-1+2, -1+2, 1+2)
        3.0f, 1.0f, 3.0f,    // (1+2, -1+2, 1+2)
        3.0f, 3.0f, 3.0f,    // (1+2, 1+2, 1+2)
        3.0f, 1.0f, 1.0f,    // (1+2, -1+2, -1+2)
        3.0f, 3.0f, 1.0f,    // (1+2, 1+2, -1+2)
        3.0f, 1.0f, 1.0f,    // (1+2, -1+2, -1+2)
        3.0f, 3.0f, 3.0f,    // (1+2, 1+2, 1+2)
        3.0f, 1.0f, 3.0f,    // (1+2, -1+2, 1+2)
        3.0f, 3.0f, 3.0f,    // (1+2, 1+2, 1+2)
        3.0f, 3.0f, 1.0f,    // (1+2, 1+2, -1+2)
        1.0f, 3.0f, 1.0f,    // (-1+2, 1+2, -1+2)
        3.0f, 3.0f, 3.0f,    // (1+2, 1+2, 1+2)
        1.0f, 3.0f, 1.0f,    // (-1+2, 1+2, -1+2)
        1.0f, 3.0f, 3.0f,    // (-1+2, 1+2, 1+2)
        3.0f, 3.0f, 3.0f,    // (1+2, 1+2, 1+2)
        1.0f, 3.0f, 3.0f,    // (-1+2, 1+2, 1+2)
        3.0f, 1.0f, 3.0f
    };
    Mesh* truc2 = setupMesh(cube);
    truc2->color = glm::vec4(1.0f, 0.0f, 0.5f, 1.0f);

    Light* sun = setupLight(DIRECTIONAL, 1);
    Light* sun2 = setupLight(DIRECTIONAL, 1);

    sun->diffuse = glm::vec3(0.0, 0.0, 1.0);
    sun2->diffuse = glm::vec3(1.0, 1.0, 0.5);
   
    while (shouldCloseTheApp()){
        sun->position = glm::vec3(-2.0f + glm::sin((float)glfwGetTime()), 2.0f + glm::cos((float)glfwGetTime()), -2.0f);
        renderScene();
    }
    terminateRender();
    return 0;
}
